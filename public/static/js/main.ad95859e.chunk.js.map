{"version":3,"sources":["component/table.js","utils.js","App.js","reportWebVitals.js","index.js"],"names":["Option","Select","Row","rows","checkedList","selected","setSelected","index","style","row","className","key","onClick","count","previous","length","height","width","data","map","x","y","ResultList","arr","checkList","chooseDate","dates","selectedDate","useState","text","min","max","filter","setFilter","filteredArr","r","indexOf","parseInt","e","console","log","onChange","v","value","Group","compact","defaultValue","textAlign","placeholder","onBlur","target","itemCount","itemSize","twoDigi","a","getDate","ms","d","Date","getFullYear","getMonth","Header","Layout","Content","App","result","setResult","setDates","setLoading","ls","localStorage","getItem","JSON","parse","checked","setChecked","useEffect","setItem","stringify","axios","get","now","date","reverse","message","error","gt","document","getElementById","gtMap","innerHTML","window","trends","embed","renderExploreWidgetTo","comparisonItem","keyword","geo","time","category","property","exploreQuery","guestPath","display","justifyContent","span","state","rest","checkItem","open","float","join","id","src","frameBorder","marginTop","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ad95859e.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FixedSizeList as List } from 'react-window';\nimport {XYPlot, VerticalBarSeries} from 'react-vis';\nimport { Input, Select } from 'antd';\n\nconst {Option} = Select;\n\nconst Row = (rows, checkedList, selected, setSelected) => ({index, style}) => {\n  const row = rows[index];\n\n  return <div style={style}\n              className={`row-container ${selected && row.key === selected.key ? 'selected' : ''} ${checkedList[row.key] ? 'checked' : ''} `}>\n    <div className=\"row\" onClick={() => setSelected(row)}>\n      <div className=\"number\">{row.count === 'not-set' ? 'N/A' : row.count}</div>\n      <div className=\"name\">{row.key}</div>\n      {row.previous.length && <div>\n        <XYPlot height={70} width={70}>\n          <VerticalBarSeries data={row.previous.map((key, index) => ({x: index, y: key || 0}))} />\n        </XYPlot>\n      </div>}\n    </div>\n  </div>\n}\n\nconst ResultList = ({arr, checkList, selected, setSelected, chooseDate, dates, selectedDate}) => {\n  const [filter, setFilter] = useState({text: '', min: '', max: ''});\n\n  let filteredArr = [...arr];\n  if (filter.text) {\n    filteredArr = filteredArr.filter(r => r.key.indexOf(filter.text) > -1);\n  }\n  if (filter.max) {\n    try {\n      filteredArr = filteredArr.filter(r => r.count <= parseInt(filter.max))\n    } catch (e) {\n      console.log('error');\n    }\n  }\n  if (filter.min) {\n    try {\n      filteredArr = filteredArr.filter(r => r.count >= parseInt(filter.min))\n    } catch (e) {\n      console.log('error');\n    }\n  }\n\n  return <div style={{height: '100%'}}>\n    <Select style={{ width: '100%' }} onChange={v => chooseDate(v)} value={selectedDate}>\n      {dates.map(x => <Option value={x} key={x}>{x}</Option>)}\n    </Select>\n    <Input.Group compact>\n      <Select defaultValue=\"1\">\n        <Option value=\"1\">Between</Option>\n      </Select>\n      <Input style={{ width: 80, textAlign: 'center' }} placeholder=\"Min\" onBlur={(e) => setFilter({...filter, min: e.target.value})} />\n      <Input style={{width: 80, textAlign: 'center' }} placeholder=\"Max\" onBlur={(e) => setFilter({...filter, max: e.target.value})} />\n    </Input.Group>\n    <Input placeholder=\"search...\" onChange={(e) => setFilter({...filter, text: e.target.value})} />\n\n    <AutoSizer>\n      {({height, width}) => (\n        <List\n          height={height - 100}\n          itemCount={filteredArr.length}\n          itemSize={70}\n          width={width}\n        >\n          {Row(filteredArr, checkList, selected, setSelected)}\n        </List>\n      )}\n    </AutoSizer>\n  </div>\n}\n\n\nexport default ResultList;\n","export const twoDigi = (a) => (a < 10) ? '0' + a : a;\nexport const getDate = (ms) => {\n  const d = new Date(ms);\n  return `${d.getFullYear()}-${twoDigi(d.getMonth() + 1)}-${twoDigi(d.getDate())}`;\n}\n","import React, { useEffect, useState } from \"react\";\nimport \"antd/dist/antd.min.css\";\nimport \"./App.css\";\nimport { Layout, Col, Row, message, Button } from \"antd\";\n\nimport ResultList from \"./component/table\";\nimport axios from \"axios\";\nimport { getDate } from \"./utils\";\n\nconst { Header, Content } = Layout;\n\nfunction App() {\n  const [result, setResult] = useState([]);\n  const [dates, setDates] = useState([]);\n  const [selectedDate, chooseDate] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const [checked, setChecked] = useState(() => {\n    try {\n      let ls = localStorage.getItem(\"rt_checked\");\n      ls = JSON.parse(ls);\n      return ls || {};\n    } catch (e) {\n      return {};\n    }\n  });\n\n  const [selected, setSelected] = useState(null);\n\n  useEffect(() => {\n    localStorage.setItem(\"rt_checked\", JSON.stringify(checked));\n  }, [checked]);\n\n  const checkItem = (key, state) => {\n    if (state) {\n      setChecked({ ...checked, [key]: \"1\" });\n    } else {\n      const { [key]: a, ...rest } = checked;\n      setChecked(rest);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      try {\n        const data = await axios.get(\n          \"https://redbubble-trends.onrender.com/trends/\" +\n            (selectedDate || getDate(Date.now()))\n        );\n        setResult(data.data.data);\n        if (!dates.length) {\n          const dates = await axios.get(\n            \"https://redbubble-trends.onrender.com/dates\"\n          );\n          // const dates = await axios.get('http://localhost:4000/dates');\n          const r = dates.data.map((x) => x.date);\n          r.reverse();\n          setDates(r);\n        }\n      } catch (e) {\n        message.error(\"Cannot find data\");\n      }\n      setLoading(false);\n    })();\n  }, [selectedDate]);\n\n  useEffect(() => {\n    const gt = document.getElementById(\"gt\");\n    const gtMap = document.getElementById(\"gt-map\");\n    if (selected && gt) {\n      gt.innerHTML = \"\";\n      window.trends.embed.renderExploreWidgetTo(\n        gt,\n        \"TIMESERIES\",\n        {\n          comparisonItem: [\n            { keyword: selected.key, geo: \"\", time: \"today 12-m\" },\n          ],\n          category: 0,\n          property: \"\",\n        },\n        {\n          exploreQuery: `q=${selected.key}&date=today 12-m`,\n          guestPath: \"https://trends.google.com:443/trends/embed/\",\n        }\n      );\n    }\n    if (selected && gtMap) {\n      gtMap.innerHTML = \"\";\n      window.trends.embed.renderExploreWidgetTo(\n        gtMap,\n        \"GEO_MAP\",\n        {\n          comparisonItem: [\n            { keyword: selected.key, geo: \"\", time: \"2004-01-01 2021-05-20\" },\n          ],\n          category: 0,\n          property: \"\",\n        },\n        {\n          exploreQuery: `q=${selected.key}&date=all`,\n          guestPath: \"https://trends.google.com:443/trends/embed/\",\n        }\n      );\n    }\n  }, [selected]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Layout>\n          <Header style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n            <h1 className=\"header\">Redbubble Trends</h1>\n          </Header>\n          <Content>\n            <Row style={{ height: \"100%\" }}>\n              <Col span={5}>\n                <ResultList\n                  arr={result}\n                  checkList={checked}\n                  selected={selected}\n                  setSelected={setSelected}\n                  dates={dates}\n                  chooseDate={chooseDate}\n                  selectedDate={selectedDate}\n                />\n              </Col>\n              <Col span={19}>\n                {selected ? (\n                  <>\n                    <div>\n                      <Button\n                        onClick={() => {\n                          checkItem(selected.key, !checked[selected.key]);\n                        }}\n                      >\n                        {checked[selected.key] ? \"Remove from\" : \"Add to\"} list\n                      </Button>\n                      <Button\n                        onClick={() => {\n                          window.open(\n                            `https://www.redbubble.com/shop/?query=${selected.key}&ref=search_box`\n                          );\n                        }}\n                      >\n                        Visit redbubble\n                      </Button>\n                      <span style={{ float: \"right\" }}>\n                        {selected.previous.filter((a) => !!a).join(\"-\")}\n                      </span>\n                    </div>\n                    <div>\n                      <iframe\n                        id=\"google-search\"\n                        src={`https://www.google.com/search?igu=1&q=${selected.key}`}\n                        frameBorder=\"0\"\n                        style={{ width: \"100%\", height: \"44vh\" }}\n                      />\n                    </div>\n                    <div\n                      style={{ width: \"100%\", height: \"47vh\", display: \"flex\" }}\n                    >\n                      <div id=\"gt\" style={{ width: \"50%\" }} />\n                      <div id=\"gt-map\" style={{ width: \"50%\" }} />\n                    </div>\n                  </>\n                ) : (\n                  <div style={{ textAlign: \"center\" }}>\n                    <h2 style={{ marginTop: 50 }}>\n                      Select a keyword to see the google trend and google search\n                      results\n                    </h2>\n                  </div>\n                )}\n              </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n//https://app.insightfactory.app/redbubble/data/popular?_=1634694977346\n// https://redbubble.dabu.ro/redbubble-popular-tags\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}